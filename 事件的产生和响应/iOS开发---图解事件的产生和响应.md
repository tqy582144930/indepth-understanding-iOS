[TOC]

# iOSå¼€å‘---å›¾è§£äº‹ä»¶çš„äº§ç”Ÿå’Œå“åº”

> æœ¬åšå®¢ä¼šä»äº‹ä»¶çš„äº§ç”Ÿå’Œå“åº”è¿™ä¸¤ä¸ªæ–¹é¢æ¥å®Œæ•´çš„è§£é‡Šäº‹ä»¶ã€‚
>
> æˆ‘ä»¬å…ˆæ‰“å€¼çœ‹ä¸€ä¸‹æœ¬æ–‡çš„ä¸»è¦å†…å®¹ï¼Œæ­£æ–‡æˆ‘ä¼šä¸€ä¸€è®²è§£ï¼š
>
> äº§ç”Ÿï¼šäº‹ä»¶å¦‚ä½•ä»çˆ¶æ§ä»¶ä¼ é€’åˆ°å­æ§ä»¶å¹¶å¯»æ‰¾åˆ°æœ€åˆé€‚çš„view
>
> å“åº”ï¼šæ‰¾åˆ°æœ€åˆé€‚çš„viewåäº‹ä»¶çš„å¤„ç†ï¼ˆtouchesæ–¹æ³•çš„é‡å†™ï¼Œä¹Ÿå°±æ˜¯äº‹ä»¶çš„å“åº”ï¼‰

## äº‹ä»¶çš„äº§ç”Ÿ

### ä»€ä¹ˆæ˜¯äº‹ä»¶(UIEvent)ï¼Ÿ

- UIEvent:ç§°ä¸ºäº‹ä»¶å¯¹è±¡ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»å‹

  ```objective-c
  NS_CLASS_AVAILABLE_IOS(2_0) @interface UIEvent : NSObject
  //äº‹ä»¶ç±»å‹
  @property(nonatomic,readonly) UIEventType     type NS_AVAILABLE_IOS(3_0);
  @property(nonatomic,readonly) UIEventSubtype  subtype NS_AVAILABLE_IOS(3_0);
  //æ—¶é—´
  @property(nonatomic,readonly) NSTimeInterval  timestamp;
  
  #if UIKIT_DEFINE_AS_PROPERTIES
  @property(nonatomic, readonly, nullable) NSSet <UITouch *> *allTouches;
  #else
  @end
  ```

- iOSä¸­çš„äº‹ä»¶å¯ä»¥åˆ†ä¸º4å¤§ç±»å‹ï¼š

  1. è§¦æ‘¸äº‹ä»¶
  2. åŠ é€Ÿè®¡äº‹ä»¶(è¿åŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚é‡åŠ›æ„Ÿåº”å’Œæ‘‡ä¸€æ‘‡ç­‰)
  3. è¿œç¨‹é¥æ§äº‹ä»¶
  4. æŒ‰å‹äº‹ä»¶ï¼ˆiOS9ä¹‹åå‡ºç°çš„ï¼‰

  ```objective-c
  //è¿™æ˜¯UIEventType
  typedef NS_ENUM(NSInteger, UIEventType) {
      UIEventTypeTouches,
      UIEventTypeMotion,
      UIEventTypeRemoteControl,
      UIEventTypePresses NS_ENUM_AVAILABLE_IOS(9_0),
  };
  ```

- ä¸‹é¢æ˜¯å®˜æ–¹ç»™å‡ºçš„ä¸€å¼ å›¾

![](http://ww4.sinaimg.cn/large/006tNc79ly1g62yw0ok35j316u0hs0x8.jpg)

- ä¸‹é¢ä¸»è¦è®²è§£`Touch Events(è§¦æ‘¸äº‹ä»¶)`ï¼š`UIApplication`é€šè¿‡ä¸€ä¸ªè§¦æ‘¸æ£€æµ‹æ¥å†³å®šæœ€åˆé€‚æ¥å¤„ç†è¯¥äº‹ä»¶çš„å“åº”è€…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”è€…æ˜¯`UIView`å¯¹è±¡ã€‚

### äº‹ä»¶çš„äº§ç”Ÿ

1. å½“ç”¨æˆ·çš„æ‰‹æŒ‡è§¦æ‘¸å±å¹•çš„æŸä¸€ä¸ª`view`çš„æ—¶å€™ï¼Œæ­¤æ—¶å°±å‘ç”Ÿäº†è§¦æ‘¸äº‹ä»¶ï¼Œäº§ç”Ÿè§¦æ‘¸äº‹ä»¶åï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±`UIApplication`ç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­,ä¸ºä»€ä¹ˆæ˜¯é˜Ÿåˆ—è€Œä¸æ˜¯æ ˆï¼Ÿå› ä¸ºé˜Ÿåˆ—çš„ç‰¹ç‚¹æ˜¯FIFOï¼Œå³å…ˆè¿›å…ˆå‡ºï¼Œå…ˆäº§ç”Ÿçš„äº‹ä»¶å…ˆå¤„ç†æ‰ç¬¦åˆå¸¸ç†ï¼Œæ‰€ä»¥æŠŠäº‹ä»¶æ·»åŠ åˆ°é˜Ÿåˆ—ã€‚
2. `UIApplication`ä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹å»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£`ï¼ˆkeyWindowï¼‰`ã€‚
3. ç„¶åç”±ä¸»çª—å£å†³å®šå¦‚ä½•å°†äº‹ä»¶äº¤ç»™æœ€åˆé€‚çš„å“åº”è€…(UIResponder)æ¥å¤„ç†

### äº‹ä»¶çš„ä¼ é€’

- åœ¨ä¸Šé¢æåˆ°**ä¸»çª—å£å†³å®šå¦‚ä½•å°†äº‹ä»¶äº¤ç»™æœ€åˆé€‚çš„å“åº”è€…(UIResponder)æ¥å¤„ç†**è¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¹‹ä¸ºäº‹ä»¶çš„ä¼ é€’ï¼Œè¯´ç›´ç™½ä¸€ç‚¹äº‹ä»¶çš„ä¼ é€’å°±æ˜¯ä»`UIApplication`->`window`->å¯»æ‰¾å¤„ç†äº‹ä»¶æœ€åˆé€‚çš„`view`çš„è¿‡ç¨‹

#### å¦‚ä½•å¯»æ‰¾æœ€åˆé€‚çš„UIView

##### UIViewæ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„æ¡ä»¶

1. `userInteractionEnabled`å±æ€§ä¸º`YES`ï¼Œè¯¥å±æ€§è¡¨ç¤ºå…è®¸æ§ä»¶åŒç”¨æˆ·äº¤äº’ã€‚
2. `Hidden`å±æ€§ä¸ºNOã€‚æ§ä»¶éƒ½çœ‹ä¸è§ï¼Œè‡ªç„¶ä¸å­˜åœ¨è§¦æ‘¸
3. `opacity`å±æ€§å€¼0 ï½0.01ã€‚
4. è§¦æ‘¸ç‚¹åœ¨è¿™ä¸ªUIViewçš„èŒƒå›´å†…ã€‚

##### äº‹ä»¶ä¼ é€’çš„æµç¨‹

1. è§¦æ‘¸äº‹ä»¶å‘ç”Ÿåï¼Œ`UIApplication`ä¼šå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£`ï¼ˆkeyWindowï¼‰`ï¼Œåˆ¤æ–­ä¸»çª—å£`ï¼ˆkeyWindowï¼‰`è‡ªå·±æ˜¯å¦èƒ½æ¥å—è§¦æ‘¸äº‹ä»¶
2. è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨è‡ªå·±èº«ä¸Š
3. åœ¨å­æ§ä»¶æ•°ç»„ä¸­ä»åå¾€å‰éå†å­æ§ä»¶ï¼Œé‡å¤å‰é¢çš„ä¸¤ä¸ªæ­¥éª¤ï¼ˆé¦–å…ˆæŸ¥æ‰¾æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ ï¼‰
4. å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­æ§ä»¶ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè‡ªå·±æœ€åˆé€‚å¤„ç†

- ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªğŸŒ°æ¥äº†è§£è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼š

![](http://ww1.sinaimg.cn/large/006tNc79ly1g6300agxq4j3061081gli.jpg)

- å‡è®¾æˆ‘ç‚¹å‡»äº†ç»¿è‰²çš„`view`

  1. ä¸»çª—å£`ï¼ˆUIWindowï¼‰`æ¥æ”¶åˆ°åº”ç”¨ç¨‹åºä¼ é€’è¿‡æ¥çš„äº‹ä»¶åï¼Œé¦–å…ˆåˆ¤æ–­è‡ªå·±èƒ½å¦æ¥æ”¶è§¦æ‘¸äº‹ä»¶ã€‚å¦‚æœèƒ½ï¼Œé‚£ä¹ˆå†åˆ¤æ–­è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨çª—å£è‡ªå·±èº«ä¸Šã€‚
  2. å¦‚æœè§¦æ‘¸ç‚¹ä¹Ÿåœ¨çª—å£èº«ä¸Šï¼Œé‚£ä¹ˆä¸»çª—å£ä¼šä»åå¾€å‰éå†è‡ªå·±çš„`å­æ§ä»¶ï¼ˆç™½è‰²viewï¼‰`,åˆ¤æ–­è‡ªå·±èƒ½å¦æ¥æ”¶è§¦æ‘¸äº‹ä»¶ã€‚å¦‚æœèƒ½ï¼Œé‚£ä¹ˆå†åˆ¤æ–­è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨`ç™½è‰²view`è‡ªå·±èº«ä¸Šã€‚
  3. å¦‚æœè§¦æ‘¸ç‚¹ä¹Ÿåœ¨`ç™½è‰²view`èº«ä¸Šï¼Œé‚£ä¹ˆ`ç™½è‰²view`ä¼šä»åå¾€å‰éå†è‡ªå·±çš„`å­æ§ä»¶ï¼ˆç»¿è‰²viewï¼‰`,åˆ¤æ–­è‡ªå·±èƒ½å¦æ¥æ”¶è§¦æ‘¸äº‹ä»¶ã€‚å¦‚æœèƒ½ï¼Œé‚£ä¹ˆå†åˆ¤æ–­è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨`ç»¿è‰²view`è‡ªå·±èº«ä¸Šã€‚
  4. å¦‚æœè§¦æ‘¸ç‚¹ä¹Ÿåœ¨`ç»¿è‰²view`èº«ä¸Šï¼Œé‚£ä¹ˆ`ç»¿è‰²view`ä¼šä»åå¾€å‰éå†è‡ªå·±çš„å­æ§ä»¶ï¼Œå‘ç°è‡ªå·±æ²¡æœ‰å­æ§ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ‰¾åˆ°äº†æœ€åˆé€‚çš„`view`å°±æ˜¯`ç»¿è‰²view`

  > æ³¨æ„âš ï¸ï¼šä¹‹æ‰€ä»¥ä¼šé‡‡å–ä»åå¾€å‰éå†å­æ§ä»¶çš„æ–¹å¼å¯»æ‰¾æœ€åˆé€‚çš„`view`åªæ˜¯ä¸ºäº†åšä¸€äº›å¾ªç¯ä¼˜åŒ–ã€‚å› ä¸ºç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼Œåæ·»åŠ çš„`view`åœ¨ä¸Šé¢ï¼Œé™ä½å¾ªç¯æ¬¡æ•°ã€‚

##### äº‹ä»¶ä¼ é€’çš„åº•å±‚å®ç°

> å‰é¢æˆ‘ä»¬ä¸ºå¤§å®¶æ¸…æ¥šçš„ä»‹ç»äº†äº‹ä»¶ä¼ é€’çš„æµç¨‹ï¼Œä½†æ˜¯å¤§å®¶è‚¯å®šä¼šæœ‰ä¸¤ä¸ªç–‘æƒ‘ï¼š
>
> **ä¸€ã€ä½ æ€ä¹ˆçŸ¥é“è‡ªå·±èƒ½å¦æ¥æ”¶è§¦æ‘¸äº‹ä»¶**
>
> **äºŒã€ä½ æ€ä¹ˆçŸ¥é“è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨è‡ªå·±èº«ä¸Š**

- ä¸Šä¸ªä¸¤ä¸ªç–‘æƒ‘éƒ½ä¼šåœ¨**hitTest:withEvent:æ–¹æ³•**ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œä¸‹é¢æˆ‘ä»¬è®¤çœŸçœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„åº•å±‚å®ç°

###### hitTest:withEvent:æ–¹æ³•

```objective-c
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    // 1.åˆ¤æ–­è‡ªå·±èƒ½å¦æ¥æ”¶è§¦æ‘¸äº‹ä»¶
    if (self.userInteractionEnabled == NO || self.hidden == YES || self.alpha <= 0.01) return nil;
    // 2.åˆ¤æ–­è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨è‡ªå·±èŒƒå›´å†…
    if (![self pointInside:point withEvent:event]) return nil;
    // 3.ä»åå¾€å‰éå†è‡ªå·±çš„å­æ§ä»¶ï¼Œçœ‹æ˜¯å¦æœ‰å­æ§ä»¶æ›´é€‚åˆå“åº”æ­¤äº‹ä»¶
    int count = self.subviews.count;
    for (int i = count - 1; i >= 0; i--) {
        UIView *childView = self.subviews[i];
        CGPoint childPoint = [self convertPoint:point toView:childView];
        UIView *fitView = [childView hitTest:childPoint withEvent:event];
        if (fitView) {
            return fitView;
        }
    }
    // æ²¡æœ‰æ‰¾åˆ°æ¯”è‡ªå·±æ›´åˆé€‚çš„view
    return self;
}
```

- ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿ
  - åªè¦äº‹ä»¶ä¸€ä¼ é€’ç»™ä¸€ä¸ªæ§ä»¶,è¿™ä¸ªæ§ä»¶å°±ä¼šè°ƒç”¨ä»–è‡ªå·±çš„`hitTest:withEvent:æ–¹æ³•`
- è¿™ä¸ªæ–¹æ³•ä½œç”¨ï¼Ÿ
  - å¯»æ‰¾å¹¶è¿”å›æœ€åˆé€‚çš„view(èƒ½å¤Ÿå“åº”äº‹ä»¶çš„é‚£ä¸ªæœ€åˆé€‚çš„view)
- æ³¨æ„âš ï¸ï¼šä¸ç®¡è¿™ä¸ªæ§ä»¶èƒ½ä¸èƒ½å¤„ç†äº‹ä»¶ï¼Œä¹Ÿä¸ç®¡è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨è¿™ä¸ªæ§ä»¶ä¸Šï¼Œäº‹ä»¶éƒ½ä¼šå…ˆä¼ é€’ç»™è¿™ä¸ªæ§ä»¶ï¼Œéšåå†è°ƒç”¨`hitTest:withEvent:æ–¹æ³•`æ¥è¿›è¡Œåˆ¤æ–­

###### pointInside:withEvent:æ–¹æ³•

- `pointInside:withEvent:`æ–¹æ³•åˆ¤æ–­ç‚¹åœ¨ä¸åœ¨å½“å‰`view`ä¸Šï¼ˆæ–¹æ³•è°ƒç”¨è€…çš„åæ ‡ç³»ä¸Šï¼‰å¦‚æœè¿”å›`YES`ï¼Œä»£è¡¨ç‚¹åœ¨æ–¹æ³•è°ƒç”¨è€…çš„åæ ‡ç³»ä¸Š;è¿”å›`NO`ä»£è¡¨ç‚¹ä¸åœ¨æ–¹æ³•è°ƒç”¨è€…çš„åæ ‡ç³»ä¸Šï¼Œé‚£ä¹ˆæ–¹æ³•è°ƒç”¨è€…ä¹Ÿå°±ä¸èƒ½å¤„ç†äº‹ä»¶ã€‚

## äº‹ä»¶çš„å“åº”

> æ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨æ§ä»¶çš„touchesæ–¹æ³•æ¥åšå…·ä½“çš„äº‹ä»¶å¤„ç†ï¼Œè¿™å°±æ˜¯äº‹ä»¶çš„å“åº”ã€‚

### UITouchå¯¹è±¡

-  ä»€ä¹ˆæ˜¯UITouchï¼Ÿ

  - åœ¨ iOS ä¸­ï¼Œæ¯ä¸€ä¸ªâ€œè§¦æ‘¸â€`(touch)`è¡Œä¸ºå¯¹è±¡å°±ä»£è¡¨å•æ ¹æ‰‹æŒ‡åœ¨å±å¹•ä¸Šçš„ä¸€æ¬¡è¿åŠ¨æ“ä½œï¼Œåœ¨ iOS ä¸­ä»¥`UITouch` ç±»å¯¹è±¡è¿›è¡ŒæŠ½è±¡è¡¨ç¤ºã€‚

  > æ³¨æ„âš ï¸ï¼š
  >
  > - å½“ç”¨æˆ·ç”¨ä¸€æ ¹æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸æ‰‹æŒ‡ç›¸å…³çš„UITouchå¯¹è±¡
  >
  > - ä¸€æ ¹æ‰‹æŒ‡å¯¹åº”ä¸€ä¸ªUITouchå¯¹è±¡
  >
  > - å¦‚æœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€2ä¸ªUITouchå¯¹è±¡
  >
  > - å¦‚æœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€ååˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨2æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°ä¸­åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡

- UITouchçš„ä½œç”¨

  - ä¿å­˜ç€è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µ
  - å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ª`UITouch`å¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡åœ¨çš„è§¦æ‘¸ä½ç½®
  - å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„`UITouch`å¯¹è±¡

- UITouchçš„å±æ€§

  ```objective-c
  //è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£
  @property(nonatomic,readonly,retain) UIWindow *window;
  //è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„è§†å›¾
  @property(nonatomic,readonly,retain) UIView *view;
  //çŸ­æ—¶é—´å†…ç‚¹æŒ‰å±å¹•çš„æ¬¡æ•°ï¼Œå¯ä»¥æ ¹æ®tapCountåˆ¤æ–­å•å‡»ã€åŒå‡»æˆ–æ›´å¤šçš„ç‚¹å‡»
  @property(nonatomic,readonly) NSUInteger tapCount;
  //è®°å½•äº†è§¦æ‘¸äº‹ä»¶äº§ç”Ÿæˆ–å˜åŒ–æ—¶çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’
  @property(nonatomic,readonly) NSTimeInterval timestamp;
  //å½“å‰è§¦æ‘¸äº‹ä»¶æ‰€å¤„çš„çŠ¶æ€
  @property(nonatomic,readonly) UITouchPhase phase;
  ```

- UITouchçš„æ–¹æ³•

  ```objective-c
  - (CGPoint)locationInView:(UIView *)view;
  // è¿”å›å€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½®
  // è¿™é‡Œè¿”å›çš„ä½ç½®æ˜¯é’ˆå¯¹viewçš„åæ ‡ç³»çš„ï¼ˆä»¥viewçš„å·¦ä¸Šè§’ä¸ºåŸç‚¹(0, 0)ï¼‰
  // è°ƒç”¨æ—¶ä¼ å…¥çš„viewå‚æ•°ä¸ºnilçš„è¯ï¼Œè¿”å›çš„æ˜¯è§¦æ‘¸ç‚¹åœ¨UIWindowçš„ä½ç½®
  
  - (CGPoint)previousLocationInView:(UIView *)view;
  // è¯¥æ–¹æ³•è®°å½•äº†å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½®
  ```

### å“åº”è€…å¯¹è±¡

- åœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶ï¼Œåªæœ‰ç»§æ‰¿äº†`UIResponder`çš„å¯¹è±¡æ‰èƒ½æ¥å—å¹¶å¤„ç†äº‹ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå“åº”è€…å¯¹è±¡â€ã€‚ä»¥ä¸‹éƒ½æ˜¯ç»§æ‰¿è‡ª`UIResponder`çš„ï¼Œæ‰€ä»¥éƒ½èƒ½æ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ã€‚

  - UIApplication
  - UIViewController
  - UIView

- é‚£ä¹ˆä¸ºä»€ä¹ˆç»§æ‰¿è‡ª`UIResponder`çš„ç±»å°±èƒ½å¤Ÿæ¥æ”¶å¹¶å¤„ç†äº‹ä»¶å‘¢ï¼Ÿ

  - å› ä¸º`UIResponder`ä¸­æä¾›äº†ä»¥ä¸‹4ä¸ªå¯¹è±¡æ–¹æ³•æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶

  ```objective-c
  // ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•
  - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
  // ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼‰
  - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
  // ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•
  - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
  // è§¦æ‘¸ç»“æŸå‰ï¼ŒæŸä¸ªç³»ç»Ÿäº‹ä»¶(ä¾‹å¦‚ç”µè¯å‘¼å…¥)ä¼šæ‰“æ–­è§¦æ‘¸è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•
  - (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
  ```

- ä¸Šé¢æœ‰ä¸¤ä¸ªå‚æ•°`(NSSet *)touches` å’Œ`(UIEvent *)event`

  - (NSSet *)touchesï¼šå°±æ˜¯UITouchå¯¹è±¡çš„é›†åˆ

    - > ä¸¾ä¾‹ï¼š
      >
      > - å¦‚æœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€2ä¸ªUITouchå¯¹è±¡
      >
      > - å¦‚æœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€ååˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨2æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°ä¸­åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡

  - (UIEvent *)eventï¼šå°±æ˜¯æœ€å¼€å§‹æˆ‘ä»¬ä»‹ç»çš„UIEeventï¼Œå®ƒè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»å‹

### äº‹ä»¶çš„å“åº”æµç¨‹

1. å½“æˆ‘ä»¬æ‰¾åˆ°æœ€åˆé€‚çš„`View`å,å¦‚æœå½“å‰çš„`View`æœ‰æ·»åŠ æ‰‹åŠ¿ï¼Œé‚£ä¹ˆç›´æ¥å“åº”ç›¸åº”çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¿äº‹ä»¶ï¼Œé‚£ä¹ˆä¼šçœ‹å…¶æ˜¯å¦å®ç°äº†å¦‚ä¸‹çš„æ–¹æ³•ï¼š

```objective-c
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;//å¼€å§‹è§¦æ‘¸
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;//æ‰‹æŒ‡ç§»åŠ¨
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;//ç»“æŸè§¦æ‘¸
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;://è§¦æ‘¸ç»ˆç«¯
```

2. å¦‚æœæœ‰å®ç°é‚£ä¹ˆå°±ç”±æ­¤`View`å“åº”ï¼Œå¦‚æœæ²¡æœ‰å®ç°ï¼ˆå³ä¸èƒ½å¤„ç†å½“å‰äº‹ä»¶ï¼‰ï¼Œé‚£ä¹ˆäº‹ä»¶å°†ä¼šæ²¿ç€å“åº”è€…é“¾`(Responder Chain)`è¿›è¡Œä¼ é€’ï¼Œç›´åˆ°é‡åˆ°èƒ½å¤„ç†è¯¥äº‹ä»¶çš„å“åº”è€…`(Responsder Object)`ã€‚

### å“åº”è€…é“¾

- ç”±å¾ˆå¤šå“åº”è€…é“¾æ¥åœ¨ä¸€èµ·ç»„åˆèµ·æ¥çš„ä¸€ä¸ªé“¾æ¡ç§°ä¹‹ä¸ºå“åº”è€…é“¾æ¡

  - > è¡¥å……ï¼š**å“åº”è€…é“¾æ¡å…¶å®è¿˜åŒ…æ‹¬è§†å›¾æ§åˆ¶å™¨ã€UIWindowå’ŒUIApplication**

